$(document).ready(function(){window.__CITYDATA__=new Object;var t=window.__CITYDATA__,n=function(t){var n="";return t[0]&&(n+=PROVINCE_AREA[t[0]].name),t[1]&&(n+="-"+CITY_AREA[t[1]].name),t[2]&&(n+="-"+TOWN_AREA[t[2]].name),n},a=function(t,n){TOWN_AREA[n]&&(t[2]=n,a(t,TOWN_AREA[n].parent)),CITY_AREA[n]&&(t[1]=n,a(t,CITY_AREA[n].parent)),PROVINCE_AREA[n]&&(t[0]=n)},i=function(t){var n=CUSTOM_AREA,a="";return _.each(n,function(n){var i="";t==n&&(i='class="active"'),a+="<a "+i+' title="'+n+'">'+CITY_AREA[n].name+"</a>"}),a},e=function(t){var n=PROVINCE_AREA,a="";return _.each(n,function(n,i){var e="";t==i&&(e='class="active"'),a+="<a "+e+" title="+i+">"+n.name+"</a>"}),a},r=function(t,n){var a="";if(t){var i=PROVINCE_AREA[t].child;_.each(i,function(t){var i="";n==t&&(i='class="active"');var e=CITY_AREA[t];a+="<a "+i+' title="'+t+'">'+e.name+"</a>"})}return a},c=function(t,n){var a="";if(t){var i=CITY_AREA[t].child;_.each(i,function(t){var i='class="town"';n==t&&(i='class="town active"');var e=TOWN_AREA[t];e&&(a+="<a "+i+' title="'+t+'">'+e.name+"</a>")})}return a},o=function(a,i){var e=a.target;if("A"===e.tagName){var c=$(e).attr("title"),o=r(c),f=i.attr("id");t[f][0]=c,t[f][1]="",t[f][2]="",i.find("#city .clearfix").html(o),i.find('#cityTab a[href="#'+f+'-city"]').tab("show"),i.find("#"+f+"-cityInput").val(n(t[f])).focus()}},f=function(a,i){var e=a.target;if("A"===e.tagName){var r=$(e).attr("title"),o=c(r),f=i.attr("id");t[f][0]=CITY_AREA[r].parent,t[f][1]=r,t[f][2]="",i.find("#"+f+"-town .clearfix").html(o),i.find('#cityTab a[href="#'+f+'-town"]').tab("show"),i.find("#"+f+"-cityInput").val(n(t[f])).focus()}},l=function(a,i){var e=a.target;if("A"===e.tagName){var r=$(e).attr("title"),c=i.attr("id");r!=t[0]&&(t[c][2]=r),i.find("#"+c+"-cityInput").val(n(t[c])).focus(),i.removeClass("open")}},d=function(t){var n=t.attr("id"),a=t.find("#"+n+"-hotCitys");a.find(".clearfix").on("click","a",function(n){n.preventDefault(),f(n,t)})},u=function(t){var n=t.attr("id"),a=t.find("#"+n+"-province");a.find(".clearfix").on("click","a",function(n){n.preventDefault(),o(n,t)})},v=function(a){var i=a.attr("id"),e=a.find("#"+i+"-city");e.find(".clearfix").on("click","a",function(t){t.preventDefault(),f(t,a)}),e.on("click","button",function(e){e.preventDefault(),t[i][1]="",t[i][2]="",a.find("#"+i+"-cityInput").val(n(t[i])),a.removeClass("open")})},A=function(a){var i=a.attr("id"),e=a.find("#"+i+"-town");e.find(".clearfix").on("click","a",function(t){t.preventDefault(),l(t,a)}),e.on("click","button",function(e){e.preventDefault(),t[i][2]="",a.find("#"+i+"-cityInput").val(n(t[i])),a.removeClass("open")})},s=function(n){var a=n.attr("id");n.find("#"+a+"-cityInput").on("click",function(o){$(".city-dropdown").removeClass("open"),$(this).parent().toggleClass("open");var f=o.target;if("INPUT"===f.tagName){var l=t[a][0],d=t[a][1],u=t[a][2];n.find("#"+a+"-hotCitys .clearfix").html(i(d)),n.find("#"+a+"-province .clearfix").html(e(l)),n.find("#"+a+"-city .clearfix").html(r(l,d)),n.find("#"+a+"-town .clearfix").html(c(d,u))}})},h=function(n){var a=n.attr("id");$("#"+a+' a[data-toggle="tab"]').on("shown.bs.tab",function(o){var f=o.target,l=$(f).attr("href"),d="#"+a+"-";l===d+"city"?n.find(d+"city .clearfix").html(r(t[a][0],t[a][1])):l===d+"town"?n.find(d+"town .clearfix").html(c(t[a][1],t[a][2])):l===d+"province"?n.find(d+"province .clearfix").html(e(t[a][0])):l===d+"hotCitys"&&n.find(d+"hotCitys .clearfix").html(i(t[a][1]))})};$.fn.cityDropdown=function(){return this.each(function(){var n=$(this),i=n.attr("id");t[i]=new Array(3),a(t[i],n.find("#"+i+"-cityCode").val()),s(n),A(n),v(n),u(n),d(n),h(n),$("body").on("click",function(t){$(".city-dropdown").is(t.target)||0!==$(".city-dropdown").has(t.target).length||0!==$(".open").has(t.target).length||$(".city-dropdown").removeClass("open")})})}});